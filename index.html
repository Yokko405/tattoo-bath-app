<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#4a90e2" />
    <meta name="description" content="åˆºé’OKã®å…¥æµ´æ–½è¨­ã‚’æ¢ã›ã‚‹ã‚¢ãƒ—ãƒª" />
    
    <title>åˆºé’OK å…¥æµ´æ–½è¨­æ¤œç´¢ ğŸ›</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Google Maps APIã¯å‹•çš„ã«èª­ã¿è¾¼ã‚€ï¼ˆAPIã‚­ãƒ¼ãŒå¿…è¦ãªå ´åˆã¯è¨­å®šã—ã¦ãã ã•ã„ï¼‰ -->
    <!-- ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å¤–ã—ã¦YOUR_API_KEYã‚’å®Ÿéš›ã®ã‚­ãƒ¼ã«ç½®ãæ›ãˆã¦ãã ã•ã„ -->
    <!-- <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap&libraries=places"></script> -->
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Yu Gothic', sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 50%, #90caf9 100%);
            min-height: 100vh;
            padding: 0;
            overflow-x: hidden;
        }

        #root {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            background: white;
            box-shadow: 0 0 40px rgba(74, 144, 226, 0.1);
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .header {
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 4px 20px rgba(74, 144, 226, 0.3);
        }

        .header h1 {
            font-size: 22px;
            margin-bottom: 5px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 12px;
            opacity: 0.9;
        }

        /* æ¤œç´¢ã‚¨ãƒªã‚¢ */
        .search-area {
            padding: 20px;
            background: #f5f5f5;
            border-bottom: 2px solid #e0e0e0;
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .search-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            border-color: #4a90e2;
        }

        .search-button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(74, 144, 226, 0.3);
            transition: transform 0.2s;
        }

        .search-button:active {
            transform: scale(0.95);
        }

        .filter-section {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-button {
            padding: 8px 16px;
            background: white;
            border: 2px solid #4a90e2;
            border-radius: 20px;
            font-size: 12px;
            color: #4a90e2;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-button.active {
            background: #4a90e2;
            color: white;
        }

        /* ã‚¿ãƒ– */
        .tabs {
            display: flex;
            background: #f5f5f5;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #999;
            transition: all 0.3s;
        }

        .tab.active {
            color: #4a90e2;
            background: white;
            border-bottom: 3px solid #4a90e2;
        }

        /* æ–½è¨­ãƒªã‚¹ãƒˆ */
        .facilities-list {
            padding: 20px;
            max-height: calc(100vh - 300px);
            overflow-y: auto;
        }

        .facility-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
            cursor: pointer;
        }

        .facility-card:active {
            transform: scale(0.98);
        }

        .facility-card:hover {
            border-color: #4a90e2;
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.2);
        }

        .facility-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 10px;
        }

        .facility-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .tattoo-badge {
            display: inline-block;
            padding: 4px 10px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            white-space: nowrap;
        }

        .facility-info {
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
        }

        .facility-info-item {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 5px;
        }

        .facility-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .tag {
            padding: 4px 10px;
            background: #e3f2fd;
            color: #4a90e2;
            border-radius: 12px;
            font-size: 11px;
        }

        /* åœ°å›³ã‚¨ãƒªã‚¢ */
        .map-container {
            width: 100%;
            height: 400px;
            background: #e0e0e0;
            position: relative;
        }

        .map-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 14px;
            background: #f5f5f5;
        }

        /* æ–½è¨­è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 25px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #f5f5f5;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .modal-close:hover {
            background: #e0e0e0;
        }

        .modal-title {
            font-size: 22px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            padding-right: 40px;
        }

        .modal-section {
            margin-bottom: 20px;
        }

        .modal-section-title {
            font-size: 14px;
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 8px;
        }

        .modal-section-content {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }

        .modal-map {
            width: 100%;
            height: 200px;
            border-radius: 10px;
            margin-top: 10px;
            background: #f5f5f5;
        }

        /* ç©ºã®çŠ¶æ…‹ */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .empty-state-text {
            font-size: 16px;
        }

        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
        .loading {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        .footer {
            text-align: center;
            padding: 20px;
            color: #999;
            font-size: 12px;
            border-top: 1px solid #e0e0e0;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ã‚µãƒ³ãƒ—ãƒ«æ–½è¨­ãƒ‡ãƒ¼ã‚¿ï¼ˆå®Ÿéš›ã®ã‚¢ãƒ—ãƒªã§ã¯APIã‹ã‚‰å–å¾—ï¼‰
        const sampleFacilities = [
            {
                id: 1,
                name: "ã‚¹ãƒ‘ãƒ»ãƒ©ã‚¯ãƒ¼ã‚¢",
                address: "æ±äº¬éƒ½æ–°å®¿åŒºæ–°å®¿3-1-1",
                prefecture: "æ±äº¬éƒ½",
                area: "æ–°å®¿åŒº",
                phone: "03-1234-5678",
                hours: "10:00 - 23:00",
                price: "å¤§äºº 2,500å††",
                tattooOk: true,
                description: "éƒ½å¿ƒã®ã‚ªã‚¢ã‚·ã‚¹ã€‚åˆºé’OKã§ã€ãƒªãƒ©ãƒƒã‚¯ã‚¹ã§ãã‚‹ç©ºé–“ã§ã™ã€‚",
                tags: ["åˆºé’OK", "ã‚µã‚¦ãƒŠ", "éœ²å¤©é¢¨å‘‚"],
                lat: 35.6938,
                lng: 139.7034
            },
            {
                id: 2,
                name: "å¤©ç„¶æ¸©æ³‰ æ¹¯æ¥½",
                address: "æ±äº¬éƒ½æ¸‹è°·åŒºæ¸‹è°·1-2-3",
                prefecture: "æ±äº¬éƒ½",
                area: "æ¸‹è°·åŒº",
                phone: "03-2345-6789",
                hours: "11:00 - 24:00",
                price: "å¤§äºº 1,800å††",
                tattooOk: true,
                description: "å¤©ç„¶æ¸©æ³‰ãŒæ¥½ã—ã‚ã‚‹æ–½è¨­ã€‚åˆºé’ã®æ–¹ã‚‚å®‰å¿ƒã—ã¦ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚",
                tags: ["åˆºé’OK", "å¤©ç„¶æ¸©æ³‰", "24æ™‚é–“å–¶æ¥­"],
                lat: 35.6580,
                lng: 139.7016
            },
            {
                id: 3,
                name: "å¥åº·ãƒ©ãƒ³ãƒ‰ ã‚†ã£ãŸã‚Š",
                address: "ç¥å¥ˆå·çœŒæ¨ªæµœå¸‚æ¸¯åŒ—åŒºæ–°æ¨ªæµœ1-1-1",
                prefecture: "ç¥å¥ˆå·çœŒ",
                area: "æ¨ªæµœå¸‚",
                phone: "045-1234-5678",
                hours: "9:00 - 22:00",
                price: "å¤§äºº 2,000å††",
                tattooOk: true,
                description: "åºƒã€…ã¨ã—ãŸç©ºé–“ã§ã‚†ã£ãã‚Šã¨ã€‚åˆºé’OKã§ã™ã€‚",
                tags: ["åˆºé’OK", "åºƒã„", "å®¶æ—é€£ã‚ŒOK"],
                lat: 35.5067,
                lng: 139.6167
            },
            {
                id: 4,
                name: "ã‚¹ãƒ¼ãƒ‘ãƒ¼éŠ­æ¹¯ æ¹¯ã®é‡Œ",
                address: "å¤§é˜ªåºœå¤§é˜ªå¸‚åŒ—åŒºæ¢…ç”°1-1-1",
                prefecture: "å¤§é˜ªåºœ",
                area: "å¤§é˜ªå¸‚",
                phone: "06-1234-5678",
                hours: "10:00 - 25:00",
                price: "å¤§äºº 1,500å††",
                tattooOk: true,
                description: "é–¢è¥¿ã®åæ¹¯ã€‚åˆºé’OKã§ã€å¤šãã®æ–¹ã«æ„›ã•ã‚Œã¦ã„ã¾ã™ã€‚",
                tags: ["åˆºé’OK", "ã‚µã‚¦ãƒŠ", "é£Ÿäº‹å‡¦ã‚ã‚Š"],
                lat: 34.7024,
                lng: 135.4959
            },
            {
                id: 5,
                name: "æ¸©æ³‰ãƒªã‚¾ãƒ¼ãƒˆ ã‚„ã™ã‚‰ã",
                address: "æ„›çŸ¥çœŒåå¤å±‹å¸‚ä¸­åŒºéŒ¦1-1-1",
                prefecture: "æ„›çŸ¥çœŒ",
                area: "åå¤å±‹å¸‚",
                phone: "052-1234-5678",
                hours: "10:00 - 23:00",
                price: "å¤§äºº 2,200å††",
                tattooOk: true,
                description: "åå¤å±‹ã®ä¸­å¿ƒåœ°ã§æ¥½ã—ã‚ã‚‹æ¸©æ³‰æ–½è¨­ã€‚åˆºé’OKã§ã™ã€‚",
                tags: ["åˆºé’OK", "æ¸©æ³‰", "ãƒªãƒ©ã‚¯ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³"],
                lat: 35.1706,
                lng: 136.8816
            }
        ];

        // éƒ½é“åºœçœŒãƒªã‚¹ãƒˆ
        const prefectures = [
            "å…¨å›½", "æ±äº¬éƒ½", "ç¥å¥ˆå·çœŒ", "å¤§é˜ªåºœ", "æ„›çŸ¥çœŒ", "åŸ¼ç‰çœŒ", 
            "åƒè‘‰çœŒ", "å…µåº«çœŒ", "ç¦å²¡çœŒ", "åŒ—æµ·é“", "å®®åŸçœŒ", "äº¬éƒ½åºœ"
        ];

        function App() {
            const [activeTab, setActiveTab] = useState('list');
            const [facilities, setFacilities] = useState(sampleFacilities);
            const [filteredFacilities, setFilteredFacilities] = useState(sampleFacilities);
            const [searchQuery, setSearchQuery] = useState('');
            const [selectedPrefecture, setSelectedPrefecture] = useState('å…¨å›½');
            const [tattooOnly, setTattooOnly] = useState(true);
            const [selectedFacility, setSelectedFacility] = useState(null);
            const [map, setMap] = useState(null);
            const [markers, setMarkers] = useState([]);

            // æ¤œç´¢ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å‡¦ç†
            useEffect(() => {
                let filtered = facilities;

                // åˆºé’OKãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                if (tattooOnly) {
                    filtered = filtered.filter(f => f.tattooOk);
                }

                // éƒ½é“åºœçœŒãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                if (selectedPrefecture !== 'å…¨å›½') {
                    filtered = filtered.filter(f => f.prefecture === selectedPrefecture);
                }

                // æ¤œç´¢ã‚¯ã‚¨ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                if (searchQuery.trim()) {
                    const query = searchQuery.toLowerCase();
                    filtered = filtered.filter(f => 
                        f.name.toLowerCase().includes(query) ||
                        f.address.toLowerCase().includes(query) ||
                        f.area.toLowerCase().includes(query) ||
                        f.tags.some(tag => tag.toLowerCase().includes(query))
                    );
                }

                setFilteredFacilities(filtered);
            }, [facilities, searchQuery, selectedPrefecture, tattooOnly]);

            // åœ°å›³ã®åˆæœŸåŒ–ï¼ˆGoogle Maps APIãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã‚‰ï¼‰
            useEffect(() => {
                if (activeTab === 'map') {
                    // Google Maps APIãŒã¾ã èª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„å ´åˆã¯èª­ã¿è¾¼ã‚€
                    if (!window.google) {
                        // Cloudflare WorkersçµŒç”±ã§APIã‚’èª­ã¿è¾¼ã‚€
                        if (typeof window.loadGoogleMaps === 'function') {
                            window.loadGoogleMaps();
                        } else {
                            console.error('loadGoogleMaps function not found');
                        }
                    } else {
                        // æ—¢ã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯ã™ãã«åˆæœŸåŒ–
                        setTimeout(() => initMap(), 100);
                    }
                }
            }, [activeTab, filteredFacilities]);

            // Google Maps APIãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã¨ãã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            useEffect(() => {
                const handleGoogleMapsLoaded = () => {
                    if (activeTab === 'map') {
                        setTimeout(() => initMap(), 100);
                    }
                };
                
                window.addEventListener('googleMapsLoaded', handleGoogleMapsLoaded);
                
                // æ—¢ã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹å ´åˆ
                if (window.google) {
                    handleGoogleMapsLoaded();
                }
                
                return () => {
                    window.removeEventListener('googleMapsLoaded', handleGoogleMapsLoaded);
                };
            }, [activeTab]);

            // ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã®åœ°å›³åˆæœŸåŒ–
            useEffect(() => {
                if (selectedFacility && window.google) {
                    // ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒè¡¨ç¤ºã•ã‚ŒãŸå¾Œã«åœ°å›³ã‚’åˆæœŸåŒ–
                    setTimeout(() => {
                        const mapElement = document.getElementById('modal-map');
                        if (mapElement) {
                            const modalMap = new window.google.maps.Map(mapElement, {
                                zoom: 15,
                                center: { lat: selectedFacility.lat, lng: selectedFacility.lng }
                            });

                            new window.google.maps.Marker({
                                position: { lat: selectedFacility.lat, lng: selectedFacility.lng },
                                map: modalMap,
                                title: selectedFacility.name
                            });
                        }
                    }, 100);
                }
            }, [selectedFacility]);

            const initMap = () => {
                if (!window.google) {
                    console.warn('Google Maps APIãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“');
                    return;
                }

                const mapElement = document.getElementById('map');
                if (!mapElement) return;

                const center = filteredFacilities.length > 0 
                    ? { lat: filteredFacilities[0].lat, lng: filteredFacilities[0].lng }
                    : { lat: 35.6812, lng: 139.7671 }; // æ±äº¬é§…ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ

                const newMap = new window.google.maps.Map(mapElement, {
                    zoom: filteredFacilities.length === 1 ? 15 : 10,
                    center: center,
                    styles: [
                        {
                            featureType: "poi",
                            elementType: "labels",
                            stylers: [{ visibility: "off" }]
                        }
                    ]
                });

                // æ—¢å­˜ã®ãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚¯ãƒªã‚¢
                markers.forEach(marker => marker.setMap(null));

                // æ–°ã—ã„ãƒãƒ¼ã‚«ãƒ¼ã‚’ä½œæˆ
                const newMarkers = filteredFacilities.map(facility => {
                    const marker = new window.google.maps.Marker({
                        position: { lat: facility.lat, lng: facility.lng },
                        map: newMap,
                        title: facility.name,
                        icon: {
                            url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'
                        }
                    });

                    marker.addListener('click', () => {
                        setSelectedFacility(facility);
                    });

                    return marker;
                });

                setMap(newMap);
                setMarkers(newMarkers);

                // è¤‡æ•°ã®æ–½è¨­ãŒã‚ã‚‹å ´åˆã¯ã€ã™ã¹ã¦ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ã‚ºãƒ¼ãƒ èª¿æ•´
                if (filteredFacilities.length > 1) {
                    const bounds = new window.google.maps.LatLngBounds();
                    filteredFacilities.forEach(f => {
                        bounds.extend({ lat: f.lat, lng: f.lng });
                    });
                    newMap.fitBounds(bounds);
                }
            };

            // æ¤œç´¢å®Ÿè¡Œ
            const handleSearch = () => {
                // useEffectã§è‡ªå‹•çš„ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚Œã‚‹
            };

            // æ–½è¨­ã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯
            const handleFacilityClick = (facility) => {
                setSelectedFacility(facility);
            };

            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
            const closeModal = () => {
                setSelectedFacility(null);
            };

            return (
                <div>
                    {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
                    <div className="header">
                        <h1>ğŸ› åˆºé’OK å…¥æµ´æ–½è¨­æ¤œç´¢</h1>
                        <p>å®‰å¿ƒã—ã¦åˆ©ç”¨ã§ãã‚‹æ–½è¨­ã‚’è¦‹ã¤ã‘ã‚ˆã†</p>
                    </div>

                    {/* æ¤œç´¢ã‚¨ãƒªã‚¢ */}
                    <div className="search-area">
                        <div className="search-box">
                            <input
                                type="text"
                                className="search-input"
                                placeholder="æ–½è¨­åã€ä½æ‰€ã€ã‚¨ãƒªã‚¢ã§æ¤œç´¢..."
                                value={searchQuery}
                                onChange={(e) => setSearchQuery(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleSearch()}
                            />
                            <button className="search-button" onClick={handleSearch}>
                                æ¤œç´¢
                            </button>
                        </div>
                        <div className="filter-section">
                            <button
                                className={`filter-button ${tattooOnly ? 'active' : ''}`}
                                onClick={() => setTattooOnly(!tattooOnly)}
                            >
                                {tattooOnly ? 'âœ“ åˆºé’OKã®ã¿' : 'åˆºé’OKã®ã¿'}
                            </button>
                            {prefectures.map(pref => (
                                <button
                                    key={pref}
                                    className={`filter-button ${selectedPrefecture === pref ? 'active' : ''}`}
                                    onClick={() => setSelectedPrefecture(pref)}
                                >
                                    {pref}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* ã‚¿ãƒ– */}
                    <div className="tabs">
                        <button
                            className={`tab ${activeTab === 'list' ? 'active' : ''}`}
                            onClick={() => setActiveTab('list')}
                        >
                            ãƒªã‚¹ãƒˆ ({filteredFacilities.length})
                        </button>
                        <button
                            className={`tab ${activeTab === 'map' ? 'active' : ''}`}
                            onClick={() => setActiveTab('map')}
                        >
                            åœ°å›³
                        </button>
                    </div>

                    {/* ãƒªã‚¹ãƒˆã‚¿ãƒ– */}
                    {activeTab === 'list' && (
                        <div className="facilities-list">
                            {filteredFacilities.length === 0 ? (
                                <div className="empty-state">
                                    <div className="empty-state-icon">ğŸ”</div>
                                    <div className="empty-state-text">
                                        æ¡ä»¶ã«åˆã†æ–½è¨­ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ
                                    </div>
                                </div>
                            ) : (
                                filteredFacilities.map(facility => (
                                    <div
                                        key={facility.id}
                                        className="facility-card"
                                        onClick={() => handleFacilityClick(facility)}
                                    >
                                        <div className="facility-header">
                                            <div>
                                                <div className="facility-name">{facility.name}</div>
                                                <div className="facility-info">
                                                    <div className="facility-info-item">
                                                        ğŸ“ {facility.address}
                                                    </div>
                                                    <div className="facility-info-item">
                                                        ğŸ• {facility.hours}
                                                    </div>
                                                    <div className="facility-info-item">
                                                        ğŸ’° {facility.price}
                                                    </div>
                                                </div>
                                            </div>
                                            {facility.tattooOk && (
                                                <span className="tattoo-badge">åˆºé’OK</span>
                                            )}
                                        </div>
                                        <div className="facility-tags">
                                            {facility.tags.map((tag, idx) => (
                                                <span key={idx} className="tag">{tag}</span>
                                            ))}
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>
                    )}

                    {/* åœ°å›³ã‚¿ãƒ– */}
                    {activeTab === 'map' && (
                        <div className="map-container">
                            <div id="map" style={{ width: '100%', height: '100%' }}></div>
                        </div>
                    )}

                    {/* æ–½è¨­è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« */}
                    {selectedFacility && (
                        <div className="modal-overlay" onClick={closeModal}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <button className="modal-close" onClick={closeModal}>Ã—</button>
                                <div className="modal-title">
                                    {selectedFacility.name}
                                    {selectedFacility.tattooOk && (
                                        <span className="tattoo-badge" style={{ marginLeft: '10px' }}>
                                            åˆºé’OK
                                        </span>
                                    )}
                                </div>
                                
                                <div className="modal-section">
                                    <div className="modal-section-title">ğŸ“ ä½æ‰€</div>
                                    <div className="modal-section-content">{selectedFacility.address}</div>
                                </div>

                                <div className="modal-section">
                                    <div className="modal-section-title">ğŸ“ é›»è©±ç•ªå·</div>
                                    <div className="modal-section-content">{selectedFacility.phone}</div>
                                </div>

                                <div className="modal-section">
                                    <div className="modal-section-title">ğŸ• å–¶æ¥­æ™‚é–“</div>
                                    <div className="modal-section-content">{selectedFacility.hours}</div>
                                </div>

                                <div className="modal-section">
                                    <div className="modal-section-title">ğŸ’° æ–™é‡‘</div>
                                    <div className="modal-section-content">{selectedFacility.price}</div>
                                </div>

                                <div className="modal-section">
                                    <div className="modal-section-title">ğŸ“ èª¬æ˜</div>
                                    <div className="modal-section-content">{selectedFacility.description}</div>
                                </div>

                                <div className="modal-section">
                                    <div className="modal-section-title">ğŸ·ï¸ ã‚¿ã‚°</div>
                                    <div className="facility-tags">
                                        {selectedFacility.tags.map((tag, idx) => (
                                            <span key={idx} className="tag">{tag}</span>
                                        ))}
                                    </div>
                                </div>

                                {window.google && (
                                    <div className="modal-section">
                                        <div className="modal-section-title">ğŸ—ºï¸ åœ°å›³</div>
                                        <div
                                            id="modal-map"
                                            className="modal-map"
                                        ></div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* ãƒ•ãƒƒã‚¿ãƒ¼ */}
                    <div className="footer">
                        åˆºé’OKã®å…¥æµ´æ–½è¨­ã‚’å®‰å¿ƒã—ã¦æ¢ã›ã¾ã™ ğŸ›<br/>
                        æƒ…å ±ã¯æœ€æ–°ã®ã‚‚ã®ã§ã¯ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚äº‹å‰ã«ã”ç¢ºèªãã ã•ã„ã€‚
                    </div>
                </div>
            );
        }

        // Cloudflare Workersã®URL
        const WORKER_URL = 'https://tattoo-bath-maps-proxy.hiyume-2.workers.dev';

        // Cloudflare WorkersçµŒç”±ã§Google Maps APIã‚’èª­ã¿è¾¼ã‚€é–¢æ•°
        // APIã‚­ãƒ¼ã¯ã‚µãƒ¼ãƒãƒ¼å´ã§ç®¡ç†ã•ã‚Œã‚‹ãŸã‚ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã¯å…¬é–‹ã•ã‚Œãªã„
        window.loadGoogleMaps = () => {
            if (window.google) return; // æ—¢ã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
            
            if (WORKER_URL === 'YOUR_WORKER_URL') {
                console.warn('Cloudflare Workers URLãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚WORKER_URLã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            console.log('Loading Google Maps API via Cloudflare Workers...');
            const script = document.createElement('script');
            script.src = `${WORKER_URL}?callback=initMap&libraries=places`;
            script.async = true;
            script.defer = true;
            script.onerror = () => {
                console.error('Google Maps APIã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚Cloudflare Workersã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
            };
            script.onload = () => {
                console.log('Google Maps API script loaded');
            };
            document.head.appendChild(script);
        };

        // Google Maps APIã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
        // APIãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã¨ãã«å‘¼ã°ã‚Œã‚‹
        window.initMap = () => {
            // åœ°å›³ãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã“ã¨ã‚’ç¤ºã™ãƒ•ãƒ©ã‚°ã‚’è¨­å®š
            window.googleMapsLoaded = true;
            
            // ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã—ã¦ã€Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é€šçŸ¥
            window.dispatchEvent(new Event('googleMapsLoaded'));
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>

</html>

